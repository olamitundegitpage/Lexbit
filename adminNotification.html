<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LexBit - Notifications Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="/images/—Pngtree—vector coins icon_3788228.png" type="image/png">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .sidebar {
            transition: all 0.3s ease;
        }
        .sidebar-collapsed {
            transform: translateX(-100%);
            width: 0;
            overflow: hidden;
        }
        .content-expanded {
            margin-left: 0;
        }
        .active-menu {
            background-color: #EFF6FF;
            border-left: 4px solid #3B82F6;
            color: #3B82F6;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            right: 0;
            min-width: 160px;
            z-index: 1;
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }
        .close-btn {
            transition: opacity 0.3s ease;
        }
        .sidebar-collapsed .close-btn {
            opacity: 0;
            pointer-events: none;
        }
        .status-badge {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
        }
        .status-unread {
            background-color: #EFF6FF;
            color: #1E40AF;
        }
        .status-read {
            background-color: #F3F4F6;
            color: #6B7280;
        }
        .type-badge {
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
        }
        .type-system {
            background-color: #DBEAFE;
            color: #1E40AF;
        }
        .type-transaction {
            background-color: #D1FAE5;
            color: #065F46;
        }
        .type-security {
            background-color: #FEE2E2;
            color: #991B1B;
        }
        .type-promotion {
            background-color: #FEF3C7;
            color: #92400E;
        }
        .notification-item.unread {
            background-color: #F8FAFC;
            border-left: 3px solid #3B82F6;
        }
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        .login-form {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            width: 400px;
            max-width: 90%;
        }
        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(0,0,0,0.1);
            border-radius: 50%;
            border-top-color: #3b82f6;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <!-- Login Overlay -->
    <div id="login-overlay" class="login-overlay">
        <div class="login-form">
            <h2 class="text-2xl font-bold mb-6 text-center">LexBit Admin Login</h2>
            <form id="login-form">
                <div class="mb-4">
                    <label for="email" class="block text-gray-700 text-sm font-bold mb-2">Email</label>
                    <input type="email" id="email" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" value="user@example.com">
                </div>
                <div class="mb-6">
                    <label for="password" class="block text-gray-700 text-sm font-bold mb-2">Password</label>
                    <input type="password" id="password" required class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" value="string">
                </div>
                <div class="flex items-center justify-between">
                    <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full">
                        Sign In
                    </button>
                </div>
                <div id="login-error" class="text-red-500 text-sm mt-4 hidden">Login failed. Please check your credentials.</div>
            </form>
        </div>
    </div>

    <!-- Sidebar -->
    <div id="sidebar" class="sidebar fixed inset-y-0 left-0 bg-white shadow-md w-64 z-20">
        <div class="flex items-center justify-between h-16 border-b border-gray-200 px-4">
            <div class="flex items-center">
                <i class="fas fa-coins text-2xl text-yellow-400"></i>
                <span class="ml-2 text-xl font-bold">LexBit Admin</span>
            </div>
            <button id="sidebar-close" class="close-btn text-gray-500 hover:text-gray-700 focus:outline-none">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="overflow-y-auto overflow-x-hidden flex-grow">
            <ul class="flex flex-col py-4 space-y-1">
                <li class="px-5">
                    <div class="flex flex-row items-center h-8">
                        <div class="text-sm font-light tracking-wide text-gray-500 uppercase">Main</div>
                    </div>
                </li>
                <li>
                    <a href="admin.html" class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-blue-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-blue-500 pr-6">
                        <span class="inline-flex justify-center items-center ml-4">
                            <i class="fas fa-tachometer-alt"></i>
                        </span>
                        <span class="ml-2 text-sm tracking-wide truncate">Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="adminuser.html" class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-blue-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-blue-500 pr-6">
                        <span class="inline-flex justify-center items-center ml-4">
                            <i class="fas fa-users"></i>
                        </span>
                        <span class="ml-2 text-sm tracking-wide truncate">Users</span>
                        <span class="px-2 py-0.5 ml-auto text-xs font-medium tracking-wide text-blue-500 bg-blue-50 rounded-full">15</span>
                    </a>
                </li>
                <li>
                    <a href="admintransactions.html" class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-blue-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-blue-500 pr-6">
                        <span class="inline-flex justify-center items-center ml-4">
                            <i class="fas fa-wallet"></i>
                        </span>
                        <span class="ml-2 text-sm tracking-wide truncate">Transactions</span>
                    </a>
                </li>
                <li>
                    <a href="admininvestment.html" class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-blue-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-blue-500 pr-6">
                        <span class="inline-flex justify-center items-center ml-4">
                            <i class="fas fa-chart-line"></i>
                        </span>
                        <span class="ml-2 text-sm tracking-wide truncate">Investments</span>
                    </a>
                </li>
                <li>
                    <a href="adminreferral.html" class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-blue-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-blue-500 pr-6">
                        <span class="inline-flex justify-center items-center ml-4">
                            <i class="fas fa-gift"></i>
                        </span>
                        <span class="ml-2 text-sm tracking-wide truncate">Referrals</span>
                    </a>
                </li>
                
                <li class="px-5 pt-5">
                    <div class="flex flex-row items-center h-8">
                        <div class="text-sm font-light tracking-wide text-gray-500 uppercase">Management</div>
                    </div>
                </li>
                <li>
                    <a href="adminsettings.html" class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-blue-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-blue-500 pr-6">
                        <span class="inline-flex justify-center items-center ml-4">
                            <i class="fas fa-cog"></i>
                        </span>
                        <span class="ml-2 text-sm tracking-wide truncate">Settings</span>
                    </a>
                </li>
                <li>
                    <a href="adminNotification.html" class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-blue-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-blue-500 pr-6 active-menu">
                        <span class="inline-flex justify-center items-center ml-4">
                            <i class="fas fa-bell"></i>
                        </span>
                        <span class="ml-2 text-sm tracking-wide truncate">Notifications</span>
                        <span id="unread-count" class="px-2 py-0.5 ml-auto text-xs font-medium tracking-wide text-red-500 bg-red-50 rounded-full">0</span>
                    </a>
                </li>
                <li>
                    <a href="support.html" class="relative flex flex-row items-center h-11 focus:outline-none hover:bg-blue-50 text-gray-600 hover:text-gray-800 border-l-4 border-transparent hover:border-blue-500 pr-6">
                        <span class="inline-flex justify-center items-center ml-4">
                            <i class="fas fa-question-circle"></i>
                        </span>
                        <span class="ml-2 text-sm tracking-wide truncate">Support</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!-- Main Content -->
    <div id="main-content" class="content-expanded flex flex-col flex-1" style="display: none;">
        <!-- Top Navigation -->
        <header class="bg-white shadow-sm z-10">
            <div class="flex items-center justify-between h-16 px-6">
                <div class="flex items-center">
                    <button id="sidebar-toggle" class="text-gray-500 focus:outline-none">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="relative ml-4">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i class="fas fa-search text-gray-400"></i>
                        </div>
                        <input type="text" id="search-input" class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" placeholder="Search notifications...">
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <button class="p-1 text-gray-400 rounded-full hover:text-gray-500 focus:outline-none">
                        <span class="sr-only">Notifications</span>
                        <div class="relative">
                            <i class="fas fa-bell text-xl"></i>
                            <span class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"></span>
                        </div>
                    </button>
                    
                    <!-- Profile dropdown -->
                    <div class="dropdown relative ml-3">
                        <div>
                            <button class="flex text-sm rounded-full focus:outline-none">
                                <span class="sr-only">Open user menu</span>
                                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold" id="user-initial">A</div>
                            </button>
                        </div>
                        <div class="dropdown-content mt-2 w-48 bg-white rounded-md shadow-lg py-1">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Your Profile</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Settings</a>
                            <a href="#" id="logout-btn" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Sign out</a>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Notification Management Content -->
        <main class="flex-1 overflow-y-auto p-6">
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h1 class="text-2xl font-bold text-gray-800">Notification Center</h1>
                    <p class="text-gray-600">Manage system notifications and user alerts</p>
                </div>
                <div class="flex space-x-3">
                    <button class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        <i class="fas fa-plus-circle mr-2"></i>Create Notification
                    </button>
                    <button class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        <i class="fas fa-cog mr-2"></i>Settings
                    </button>
                </div>
            </div>
            
            <!-- Notification Summary Cards -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500 truncate">Total Notifications</p>
                            <p class="mt-1 text-3xl font-semibold text-gray-900" id="total-notifications">0</p>
                        </div>
                        <div class="bg-blue-100 p-3 rounded-full">
                            <i class="fas fa-bell text-blue-600 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4">
                        <span class="text-green-600 text-sm font-semibold" id="total-trend">+0%</span>
                        <span class="text-gray-500 text-sm ml-2">from last week</span>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500 truncate">Unread Notifications</p>
                            <p class="mt-1 text-3xl font-semibold text-gray-900" id="unread-notifications">0</p>
                        </div>
                        <div class="bg-red-100 p-3 rounded-full">
                            <i class="fas fa-envelope text-red-600 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4">
                        <span class="text-red-600 text-sm font-semibold" id="unread-trend">+0%</span>
                        <span class="text-gray-500 text-sm ml-2">from last week</span>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500 truncate">System Alerts</p>
                            <p class="mt-1 text-3xl font-semibold text-gray-900" id="system-notifications">0</p>
                        </div>
                        <div class="bg-yellow-100 p-3 rounded-full">
                            <i class="fas fa-exclamation-triangle text-yellow-600 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4">
                        <span class="text-green-600 text-sm font-semibold" id="system-trend">+0%</span>
                        <span class="text-gray-500 text-sm ml-2">from last week</span>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-500 truncate">User Notifications</p>
                            <p class="mt-1 text-3xl font-semibold text-gray-900" id="user-notifications">0</p>
                        </div>
                        <div class="bg-green-100 p-3 rounded-full">
                            <i class="fas fa-user-circle text-green-600 text-xl"></i>
                        </div>
                    </div>
                    <div class="mt-4">
                        <span class="text-green-600 text-sm font-semibold" id="user-trend">+0%</span>
                        <span class="text-gray-500 text-sm ml-2">from last week</span>
                    </div>
                </div>
            </div>
            
            <!-- Filters and Actions -->
            <div class="bg-white rounded-lg shadow p-4 mb-6">
                <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4 md:mb-0">
                        <div>
                            <label for="type-filter" class="block text-sm font-medium text-gray-700 mb-1">Type</label>
                            <select id="type-filter" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                <option value="all">All Types</option>
                                <option value="system">System</option>
                                <option value="transaction">Transaction</option>
                                <option value="security">Security</option>
                                <option value="promotion">Promotion</option>
                            </select>
                        </div>
                        <div>
                            <label for="status-filter" class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                            <select id="status-filter" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                <option value="all">All Statuses</option>
                                <option value="unread">Unread</option>
                                <option value="read">Read</option>
                            </select>
                        </div>
                        <div>
                            <label for="user-filter" class="block text-sm font-medium text-gray-700 mb-1">User</label>
                            <select id="user-filter" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                <option value="all">All Users</option>
                                <option value="admin">Admin Only</option>
                                <option value="users">Users Only</option>
                            </select>
                        </div>
                        <div>
                            <label for="date-range" class="block text-sm font-medium text-gray-700 mb-1">Date Range</label>
                            <select id="date-range" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                <option value="all">All Time</option>
                                <option value="today">Today</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                            </select>
                        </div>
                    </div>
                    <div class="flex space-x-3">
                        <button id="apply-filters" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            <i class="fas fa-filter mr-2"></i>Apply Filters
                        </button>
                        <button id="reset-filters" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            <i class="fas fa-sync-alt mr-2"></i>Reset
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Bulk Actions -->
            <div class="bg-white rounded-lg shadow p-4 mb-6">
                <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                    <div class="flex items-center mb-4 md:mb-0">
                        <input id="select-all" name="select-all" type="checkbox" class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded">
                        <label for="select-all" class="ml-2 block text-sm text-gray-700">Select all</label>
                    </div>
                    <div class="flex space-x-3">
                        <button id="mark-all-read" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            <i class="fas fa-envelope-open-text mr-2"></i>Mark as Read
                        </button>
                        <button class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            <i class="fas fa-trash-alt mr-2"></i>Delete
                        </button>
                        <button class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                            <i class="fas fa-paper-plane mr-2"></i>Resend
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Notifications List -->
            <div class="bg-white rounded-lg shadow overflow-hidden">
                <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                    <h2 class="text-lg font-medium text-gray-900">Recent Notifications</h2>
                    <div class="flex items-center">
                        <span class="text-sm text-gray-500 mr-3" id="showing-text">Loading notifications...</span>
                        <button id="prev-page" class="p-1 text-gray-400 hover:text-gray-500 focus:outline-none">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button id="next-page" class="p-1 text-gray-400 hover:text-gray-500 focus:outline-none ml-1">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                <div id="notifications-container" class="divide-y divide-gray-200">
                    <!-- Notifications will be loaded here -->
                    <div class="p-6 text-center text-gray-500">
                        <div class="spinner mx-auto mb-2"></div>
                        <p>Loading notifications...</p>
                    </div>
                </div>
                <div class="px-6 py-4 border-t border-gray-200 flex items-center justify-between">
                    <div class="flex-1 flex justify-between sm:hidden">
                        <a href="#" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                            Previous
                        </a>
                        <a href="#" class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                            Next
                        </a>
                    </div>
                    <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                        <div>
                            <p class="text-sm text-gray-700" id="pagination-info">
                                Loading...
                            </p>
                        </div>
                        <div>
                            <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination" id="pagination-nav">
                                <!-- Pagination will be generated here -->
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Notification Templates -->
            <div class="bg-white rounded-lg shadow overflow-hidden mt-8">
                <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                    <h2 class="text-lg font-medium text-gray-900">Notification Templates</h2>
                    <button class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        <i class="fas fa-plus-circle mr-2"></i>New Template
                    </button>
                </div>
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- System Maintenance Template -->
                        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <h3 class="text-md font-medium text-gray-900">System Maintenance</h3>
                                <span class="type-badge type-system">System</span>
                            </div>
                            <p class="mt-2 text-sm text-gray-500">Alert users about scheduled maintenance windows and platform downtime.</p>
                            <div class="mt-4 flex justify-between items-center">
                                <span class="text-xs text-gray-500">Last used: Jun 22</span>
                                <div class="flex space-x-2">
                                    <button class="text-blue-600 hover:text-blue-900 text-sm font-medium">
                                        Edit
                                    </button>
                                    <button class="text-gray-500 hover:text-gray-700 text-sm font-medium">
                                        Preview
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- New Investment Template -->
                        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <h3 class="text-md font-medium text-gray-900">New Investment</h3>
                                <span class="type-badge type-transaction">Transaction</span>
                            </div>
                            <p class="mt-2 text-sm text-gray-500">Notify users when their investment is successfully processed.</p>
                            <div class="mt-4 flex justify-between items-center">
                                <span class="text-xs text-gray-500">Last used: Jun 22</span>
                                <div class="flex space-x-2">
                                    <button class="text-blue-600 hover:text-blue-900 text-sm font-medium">
                                        Edit
                                    </button>
                                    <button class="text-gray-500 hover:text-gray-700 text-sm font-medium">
                                        Preview
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Security Alert Template -->
                        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                            <div class="flex items-center justify-between">
                                <h3 class="text-md font-medium text-gray-900">Security Alert</h3>
                                <span class="type-badge type-security">Security</span>
                            </div>
                            <p class="mt-2 text-sm text-gray-500">Alert users about suspicious activities or login attempts.</p>
                            <div class="mt-4 flex justify-between items-center">
                                <span class="text-xs text-gray-500">Last used: Jun 21</span>
                                <div class="flex space-x-2">
                                    <button class="text-blue-600 hover:text-blue-900 text-sm font-medium">
                                        Edit
                                    </button>
                                    <button class="text-gray-500 hover:text-gray-700 text-sm font-medium">
                                        Preview
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // API Configuration
        const API_BASE_URL = 'https://lexbit.onrender.com';
        let accessToken = localStorage.getItem('accessToken');
        let refreshToken = localStorage.getItem('refreshToken');
        let currentPage = 1;
        const limit = 8;
        let totalNotifications = 0;
        let notificationsData = [];

        // DOM Elements
        const loginOverlay = document.getElementById('login-overlay');
        const mainContent = document.getElementById('main-content');
        const loginForm = document.getElementById('login-form');
        const loginError = document.getElementById('login-error');
        const notificationsContainer = document.getElementById('notifications-container');
        const paginationInfo = document.getElementById('pagination-info');
        const paginationNav = document.getElementById('pagination-nav');
        const showingText = document.getElementById('showing-text');
        const logoutBtn = document.getElementById('logout-btn');
        const markAllReadBtn = document.getElementById('mark-all-read');
        const applyFiltersBtn = document.getElementById('apply-filters');
        const resetFiltersBtn = document.getElementById('reset-filters');
        const searchInput = document.getElementById('search-input');
        const prevPageBtn = document.getElementById('prev-page');
        const nextPageBtn = document.getElementById('next-page');

        // Check authentication status on page load
        document.addEventListener('DOMContentLoaded', function() {
            if (accessToken) {
                // Verify if token is still valid
                verifyToken().then(isValid => {
                    if (isValid) {
                        hideLogin();
                        loadNotifications();
                    } else {
                        showLogin();
                    }
                }).catch(() => {
                    showLogin();
                });
            } else {
                showLogin();
            }
        });

        // Login form submission
        loginForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            try {
                const response = await fetch(`${API_BASE_URL}/login`, {
                    method: 'POST',
                    headers: {
                        'accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    accessToken = data.data.access_token;
                    refreshToken = data.data.refresh_token;
                    
                    // Store tokens
                    localStorage.setItem('accessToken', accessToken);
                    localStorage.setItem('refreshToken', refreshToken);
                    
                    // Set user initial
                    document.getElementById('user-initial').textContent = email.charAt(0).toUpperCase();
                    
                    // Hide login and show main content
                    hideLogin();
                    loadNotifications();
                } else {
                    showLoginError();
                }
            } catch (error) {
                console.error('Login error:', error);
                showLoginError();
            }
        });

        // Logout functionality
        logoutBtn.addEventListener('click', function(e) {
            e.preventDefault();
            localStorage.removeItem('accessToken');
            localStorage.removeItem('refreshToken');
            accessToken = null;
            refreshToken = null;
            showLogin();
        });

        // Mark all as read
        markAllReadBtn.addEventListener('click', function() {
            markAllAsRead();
        });

        // Apply filters
        applyFiltersBtn.addEventListener('click', function() {
            currentPage = 1;
            loadNotifications();
        });

        // Reset filters
        resetFiltersBtn.addEventListener('click', function() {
            document.getElementById('type-filter').value = 'all';
            document.getElementById('status-filter').value = 'all';
            document.getElementById('user-filter').value = 'all';
            document.getElementById('date-range').value = 'all';
            searchInput.value = '';
            currentPage = 1;
            loadNotifications();
        });

        // Search functionality
        searchInput.addEventListener('keyup', function(e) {
            if (e.key === 'Enter') {
                currentPage = 1;
                loadNotifications();
            }
        });

        // Pagination
        prevPageBtn.addEventListener('click', function() {
            if (currentPage > 1) {
                currentPage--;
                loadNotifications();
            }
        });

        nextPageBtn.addEventListener('click', function() {
            const totalPages = Math.ceil(totalNotifications / limit);
            if (currentPage < totalPages) {
                currentPage++;
                loadNotifications();
            }
        });

        // Helper functions
        function showLogin() {
            loginOverlay.style.display = 'flex';
            mainContent.style.display = 'none';
        }

        function hideLogin() {
            loginOverlay.style.display = 'none';
            mainContent.style.display = 'flex';
        }

        function showLoginError() {
            loginError.classList.remove('hidden');
            setTimeout(() => {
                loginError.classList.add('hidden');
            }, 3000);
        }

        async function verifyToken() {
            try {
                const response = await fetch(`${API_BASE_URL}/admin/notifications?page=1&limit=1`, {
                    method: 'GET',
                    headers: {
                        'accept': 'application/json',
                        'Authorization': `Bearer ${accessToken}`
                    }
                });
                
                return response.ok;
            } catch (error) {
                console.error('Token verification error:', error);
                return false;
            }
        }

        async function refreshAccessToken() {
            try {
                const response = await fetch(`${API_BASE_URL}/refresh`, {
                    method: 'POST',
                    headers: {
                        'accept': 'application/json',
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${refreshToken}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    accessToken = data.access_token;
                    localStorage.setItem('accessToken', accessToken);
                    return true;
                }
                return false;
            } catch (error) {
                console.error('Token refresh error:', error);
                return false;
            }
        }

        async function apiCall(url, options = {}) {
            options.headers = options.headers || {};
            options.headers['Authorization'] = `Bearer ${accessToken}`;
            options.headers['accept'] = 'application/json';
            
            let response = await fetch(url, options);
            
            // If token is invalid, try to refresh it
            if (response.status === 401) {
                const refreshed = await refreshAccessToken();
                if (refreshed) {
                    options.headers['Authorization'] = `Bearer ${accessToken}`;
                    response = await fetch(url, options);
                } else {
                    // If refresh fails, redirect to login
                    showLogin();
                    throw new Error('Authentication failed');
                }
            }
            
            return response;
        }

        async function loadNotifications() {
            try {
                notificationsContainer.innerHTML = `
                    <div class="p-6 text-center text-gray-500">
                        <div class="spinner mx-auto mb-2"></div>
                        <p>Loading notifications...</p>
                    </div>
                `;
                
                // Build query parameters
                const typeFilter = document.getElementById('type-filter').value;
                const statusFilter = document.getElementById('status-filter').value;
                const userFilter = document.getElementById('user-filter').value;
                const dateRange = document.getElementById('date-range').value;
                const searchQuery = searchInput.value;
                
                let url = `${API_BASE_URL}/admin/notifications?page=${currentPage}&limit=${limit}`;
                
                if (typeFilter !== 'all') url += `&type=${typeFilter}`;
                if (statusFilter !== 'all') url += `&status=${statusFilter}`;
                if (userFilter !== 'all') url += `&user_type=${userFilter}`;
                if (dateRange !== 'all') url += `&date_range=${dateRange}`;
                if (searchQuery) url += `&search=${encodeURIComponent(searchQuery)}`;
                
                const response = await apiCall(url);
                
                if (response.ok) {
                    const data = await response.json();
                    notificationsData = data.notifications || [];
                    totalNotifications = data.total_count || 0;
                    
                    renderNotifications();
                    updateSummaryCards(data.summary || {});
                    updatePagination();
                } else {
                    throw new Error('Failed to load notifications');
                }
            } catch (error) {
                console.error('Error loading notifications:', error);
                notificationsContainer.innerHTML = `
                    <div class="p-6 text-center text-red-500">
                        <i class="fas fa-exclamation-circle text-2xl mb-2"></i>
                        <p>Failed to load notifications. Please try again.</p>
                        <button class="mt-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600" onclick="loadNotifications()">
                            Retry
                        </button>
                    </div>
                `;
            }
        }

        function renderNotifications() {
            if (notificationsData.length === 0) {
                notificationsContainer.innerHTML = `
                    <div class="p-6 text-center text-gray-500">
                        <i class="fas fa-bell-slash text-2xl mb-2"></i>
                        <p>No notifications found.</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            notificationsData.forEach(notification => {
                const date = new Date(notification.created_at).toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                const isUnread = notification.status === 'unread';
                const typeClass = `type-${notification.type}`;
                const statusClass = isUnread ? 'status-unread' : 'status-read';
                const statusText = isUnread ? 'Unread' : 'Read';
                const unreadClass = isUnread ? 'unread' : '';
                
                html += `
                    <div class="notification-item ${unreadClass} p-6 hover:bg-gray-50 cursor-pointer" data-id="${notification.id}">
                        <div class="flex items-start">
                            <div class="flex-shrink-0 pt-0.5">
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i class="fas fa-bell text-blue-600"></i>
                                </div>
                            </div>
                            <div class="ml-4 flex-1 min-w-0">
                                <div class="flex justify-between">
                                    <p class="text-sm font-medium text-gray-900">${notification.title}</p>
                                    <div class="flex items-center space-x-2">
                                        <span class="type-badge ${typeClass}">${notification.type}</span>
                                        <span class="status-badge ${statusClass}">${statusText}</span>
                                    </div>
                                </div>
                                <p class="mt-1 text-sm text-gray-500">${notification.message}</p>
                                <div class="mt-2 flex items-center justify-between">
                                    <span class="text-xs text-gray-500">${date}</span>
                                    <div class="flex space-x-3">
                                        <button class="text-blue-600 hover:text-blue-900 text-sm font-medium" onclick="viewNotification('${notification.id}')">
                                            View Details
                                        </button>
                                        ${isUnread ? `
                                        <button class="text-gray-500 hover:text-gray-700 text-sm font-medium" onclick="markAsRead('${notification.id}')">
                                            Dismiss
                                        </button>
                                        ` : ''}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            notificationsContainer.innerHTML = html;
            
            // Add click event to mark as read when clicking anywhere on the notification
            document.querySelectorAll('.notification-item.unread').forEach(item => {
                item.addEventListener('click', function() {
                    const notificationId = this.getAttribute('data-id');
                    markAsRead(notificationId);
                });
            });
        }

        function updateSummaryCards(summary) {
            document.getElementById('total-notifications').textContent = summary.total || 0;
            document.getElementById('unread-notifications').textContent = summary.unread || 0;
            document.getElementById('system-notifications').textContent = summary.system || 0;
            document.getElementById('user-notifications').textContent = summary.user || 0;
            
            document.getElementById('unread-count').textContent = summary.unread || 0;
            
            // Set some mock trends (in a real app, this would come from the API)
            document.getElementById('total-trend').textContent = '+12.5%';
            document.getElementById('unread-trend').textContent = summary.unread_trend || '+3.2%';
            document.getElementById('system-trend').textContent = '+5.7%';
            document.getElementById('user-trend').textContent = '+8.1%';
        }

        function updatePagination() {
            const totalPages = Math.ceil(totalNotifications / limit);
            const startItem = (currentPage - 1) * limit + 1;
            const endItem = Math.min(currentPage * limit, totalNotifications);
            
            showingText.textContent = `Showing ${startItem} to ${endItem} of ${totalNotifications} notifications`;
            paginationInfo.innerHTML = `Showing <span class="font-medium">${startItem}</span> to <span class="font-medium">${endItem}</span> of <span class="font-medium">${totalNotifications}</span> results`;
            
            // Generate pagination buttons
            let paginationHtml = '';
            
            // Previous button
            paginationHtml += `
                <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 ${currentPage === 1 ? 'opacity-50 cursor-not-allowed' : ''}" ${currentPage === 1 ? 'onclick="return false;"' : `onclick="changePage(${currentPage - 1})"`}>
                    <span class="sr-only">Previous</span>
                    <i class="fas fa-chevron-left"></i>
                </a>
            `;
            
            // Page numbers
            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            for (let i = startPage; i <= endPage; i++) {
                paginationHtml += `
                    <a href="#" class="relative inline-flex items-center px-4 py-2 border text-sm font-medium ${i === currentPage ? 'z-10 bg-blue-50 border-blue-500 text-blue-600' : 'bg-white border-gray-300 text-gray-500 hover:bg-gray-50'}" onclick="changePage(${i})">
                        ${i}
                    </a>
                `;
            }
            
            // Next button
            paginationHtml += `
                <a href="#" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 ${currentPage === totalPages ? 'opacity-50 cursor-not-allowed' : ''}" ${currentPage === totalPages ? 'onclick="return false;"' : `onclick="changePage(${currentPage + 1})"`}>
                    <span class="sr-only">Next</span>
                    <i class="fas fa-chevron-right"></i>
                </a>
            `;
            
            paginationNav.innerHTML = paginationHtml;
        }

        function changePage(page) {
            currentPage = page;
            loadNotifications();
            window.scrollTo(0, 0);
        }

        async function markAsRead(notificationId) {
            try {
                const response = await apiCall(`${API_BASE_URL}/notifications/${notificationId}/read`, {
                    method: 'PATCH'
                });
                
                if (response.ok) {
                    // Update UI without reloading
                    const notificationElement = document.querySelector(`.notification-item[data-id="${notificationId}"]`);
                    if (notificationElement) {
                        notificationElement.classList.remove('unread');
                        const statusBadge = notificationElement.querySelector('.status-badge');
                        if (statusBadge) {
                            statusBadge.classList.remove('status-unread');
                            statusBadge.classList.add('status-read');
                            statusBadge.textContent = 'Read';
                        }
                    }
                    
                    // Update counters
                    const unreadCount = parseInt(document.getElementById('unread-notifications').textContent) - 1;
                    document.getElementById('unread-notifications').textContent = unreadCount;
                    document.getElementById('unread-count').textContent = unreadCount;
                }
            } catch (error) {
                console.error('Error marking notification as read:', error);
                alert('Failed to mark notification as read. Please try again.');
            }
        }

        async function markAllAsRead() {
            try {
                const response = await apiCall(`${API_BASE_URL}/notifications/mark-all-read`, {
                    method: 'PATCH'
                });
                
                if (response.ok) {
                    // Update all notifications to read state
                    document.querySelectorAll('.notification-item').forEach(item => {
                        item.classList.remove('unread');
                        const statusBadge = item.querySelector('.status-badge');
                        if (statusBadge) {
                            statusBadge.classList.remove('status-unread');
                            statusBadge.classList.add('status-read');
                            statusBadge.textContent = 'Read';
                        }
                    });
                    
                    // Update counters
                    document.getElementById('unread-notifications').textContent = '0';
                    document.getElementById('unread-count').textContent = '0';
                }
            } catch (error) {
                console.error('Error marking all notifications as read:', error);
                alert('Failed to mark all notifications as read. Please try again.');
            }
        }

        function viewNotification(notificationId) {
            // In a real application, this would open a detailed view
            alert(`Viewing details for notification: ${notificationId}`);
        }

        // Toggle sidebar
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const sidebarClose = document.getElementById('sidebar-close');
        
        function toggleSidebar() {
            sidebar.classList.toggle('sidebar-collapsed');
            mainContent.classList.toggle('content-expanded');
        }
        
        sidebarToggle.addEventListener('click', toggleSidebar);
        sidebarClose.addEventListener('click', toggleSidebar);
        
        // Close sidebar when clicking outside (on mobile)
        document.addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && !sidebar.contains(event.target) && 
                event.target !== sidebarToggle && !sidebarToggle.contains(event.target)) {
                if (!sidebar.classList.contains('sidebar-collapsed')) {
                    toggleSidebar();
                }
            }
        });

        // Set active menu item
        const menuItems = document.querySelectorAll('#sidebar ul li a');
        menuItems.forEach(item => {
            item.addEventListener('click', function() {
                menuItems.forEach(i => i.classList.remove('active-menu'));
                this.classList.add('active-menu');
                
                // Close sidebar on mobile after selection
                if (window.innerWidth <= 768) {
                    toggleSidebar();
                }
            });
        });

        // Initialize dropdowns
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.dropdown')) {
                document.querySelectorAll('.dropdown-content').forEach(dropdown => {
                    dropdown.style.display = 'none';
                });
            }
        });

        // Show dropdown when clicking on profile
        document.querySelector('.dropdown button').addEventListener('click', function(e) {
            e.stopPropagation();
            const dropdown = this.parentNode.querySelector('.dropdown-content');
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
        });
        
        // Handle window resize
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                sidebar.classList.remove('sidebar-collapsed');
                mainContent.classList.remove('content-expanded');
            }
        });

        // Select all checkbox functionality
        document.getElementById('select-all').addEventListener('change', function(e) {
            const checkboxes = document.querySelectorAll('.notification-item input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = e.target.checked;
            });
        });
    </script>
</body>
</html>